<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Safira Football Teams Split </title>
    <!-- <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"> -->

    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/jquery.mobile.css">
    <!-- <link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/jquerymobile/1.4.2/jquery.mobile.css" /> -->
    <link rel="stylesheet" href="css/editable-listview.css">
    <link rel="stylesheet" href="css/site.css">
    <link rel="stylesheet" href="css/spectrum.css">
    <!-- <script src="http://code.jquery.com/jquery-2.1.1.js"></script> -->

    <!-- <script src="js/jquery-3.5.1.min.js"></script> -->
    <script src="js/jquery-2.1.1.js"></script>
    <script src="js/jquery.mobile.js"></script>
    <script src="js/editable-listview.js"></script>
    <script src="js/spectrum.js"></script>
    <script src="https://code.jquery.com/ui/1.13.2/jquery-ui.js"></script>
    <link rel="stylesheet" href="css/jquery-ui.css">


</head>

<body>
    <div class="container-fluid">
        <div class="row mt-2">
            <div class="col">
                <ul id="left-members" data-role="listview">
                    <li>Remove Me Please</li>
                </ul>
            </div>
            <div class="col-6">
                <div class="container">
                    <div class="row">
                        <button type="button" id="btn-import" class="btn btn-success">Import</button>
                        <button type="button" id="btn-split" class="btn btn-success">Team Split</button>
                    </div>
                    <div class="row">
                        <div class="col pl-0">
                            <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
                                version="1.1" id="Capa_1" x="0px" y="0px" width="250" height="250"
                                viewBox="0 0 40.143 40.143" style="enable-background:new 0 0 40.143 40.143;"
                                xml:space="preserve">
                                <g id="shirt-one">
                                    <path
                                        d="M29.248,4.118l-0.502,0.503V4.118h-2.473c-1.115,1.723-3.469,2.914-6.202,2.914c-2.732,0-5.086-1.191-6.201-2.914h-2.473    v0.503l-0.503-0.503L2,13.017l4.865,4.869l4.532-4.534v22.672h17.347V13.353l4.533,4.534l4.864-4.87L29.248,4.118z">
                                    </path>
                                    <path
                                        d="M28.744,38.024H11.397c-1.104,0-2-0.896-2-2V18.182L8.279,19.3c-0.375,0.376-0.884,0.586-1.415,0.586c0,0,0,0,0,0    c-0.53,0-1.04-0.211-1.415-0.586l-4.865-4.869c-0.78-0.781-0.78-2.046,0-2.828L9.48,2.704c0.434-0.435,1.061-0.646,1.665-0.57    c0.083-0.01,0.167-0.016,0.252-0.016h2.473c0.678,0,1.311,0.344,1.679,0.913c0.787,1.216,2.562,2.001,4.522,2.001    s3.736-0.785,4.523-2.001c0.368-0.569,1-0.913,1.679-0.913h2.473c0.085,0,0.169,0.005,0.252,0.016    c0.082-0.01,0.165-0.016,0.249-0.016c0.001,0,0.001,0,0.001,0c0.53,0,1.039,0.211,1.415,0.586l8.894,8.898    c0.78,0.781,0.78,2.046,0,2.828l-4.864,4.87c-0.375,0.375-0.884,0.586-1.414,0.586c-0.001,0-0.001,0-0.001,0    c-0.53,0.001-1.039-0.21-1.414-0.585l-1.119-1.12v17.843C30.744,37.129,29.849,38.024,28.744,38.024z M13.397,34.024h13.347    V13.353c0-0.809,0.487-1.538,1.234-1.848c0.748-0.311,1.607-0.139,2.18,0.434l3.118,3.118l2.038-2.04l-6.399-6.403    c-0.319,0.029-0.633-0.021-0.934-0.145c-0.209-0.086-0.398-0.206-0.562-0.351h-0.172c-1.651,1.82-4.297,2.914-7.176,2.914    c-2.879,0-5.524-1.094-7.176-2.914h-0.172c-0.163,0.145-0.352,0.264-0.561,0.351c-0.303,0.125-0.625,0.169-0.936,0.145l-6.4,6.404    l2.038,2.04l3.117-3.119c0.572-0.573,1.432-0.744,2.18-0.434c0.748,0.31,1.235,1.039,1.235,1.848V34.024z">
                                    </path>
                                </g>

                            </svg>
                        </div>
                        <div class="col pr-0">
                            <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
                                version="1.1" id="Capa_1" x="0px" y="0px" width="250" height="250"
                                viewBox="0 0 40.143 40.143" style="enable-background:new 0 0 40.143 40.143;"
                                xml:space="preserve">
                                <g id="shirt-two">
                                    <path
                                        d="M29.248,4.118l-0.502,0.503V4.118h-2.473c-1.115,1.723-3.469,2.914-6.202,2.914c-2.732,0-5.086-1.191-6.201-2.914h-2.473    v0.503l-0.503-0.503L2,13.017l4.865,4.869l4.532-4.534v22.672h17.347V13.353l4.533,4.534l4.864-4.87L29.248,4.118z">
                                    </path>
                                    <path
                                        d="M28.744,38.024H11.397c-1.104,0-2-0.896-2-2V18.182L8.279,19.3c-0.375,0.376-0.884,0.586-1.415,0.586c0,0,0,0,0,0    c-0.53,0-1.04-0.211-1.415-0.586l-4.865-4.869c-0.78-0.781-0.78-2.046,0-2.828L9.48,2.704c0.434-0.435,1.061-0.646,1.665-0.57    c0.083-0.01,0.167-0.016,0.252-0.016h2.473c0.678,0,1.311,0.344,1.679,0.913c0.787,1.216,2.562,2.001,4.522,2.001    s3.736-0.785,4.523-2.001c0.368-0.569,1-0.913,1.679-0.913h2.473c0.085,0,0.169,0.005,0.252,0.016    c0.082-0.01,0.165-0.016,0.249-0.016c0.001,0,0.001,0,0.001,0c0.53,0,1.039,0.211,1.415,0.586l8.894,8.898    c0.78,0.781,0.78,2.046,0,2.828l-4.864,4.87c-0.375,0.375-0.884,0.586-1.414,0.586c-0.001,0-0.001,0-0.001,0    c-0.53,0.001-1.039-0.21-1.414-0.585l-1.119-1.12v17.843C30.744,37.129,29.849,38.024,28.744,38.024z M13.397,34.024h13.347    V13.353c0-0.809,0.487-1.538,1.234-1.848c0.748-0.311,1.607-0.139,2.18,0.434l3.118,3.118l2.038-2.04l-6.399-6.403    c-0.319,0.029-0.633-0.021-0.934-0.145c-0.209-0.086-0.398-0.206-0.562-0.351h-0.172c-1.651,1.82-4.297,2.914-7.176,2.914    c-2.879,0-5.524-1.094-7.176-2.914h-0.172c-0.163,0.145-0.352,0.264-0.561,0.351c-0.303,0.125-0.625,0.169-0.936,0.145l-6.4,6.404    l2.038,2.04l3.117-3.119c0.572-0.573,1.432-0.744,2.18-0.434c0.748,0.31,1.235,1.039,1.235,1.848V34.024z">
                                    </path>
                                </g>

                            </svg>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col pl-0">
                            <ul class="list-group" id="teamone">
                                <li class="list-group-item active">Team One</li>
                            </ul>
                        </div>
                        <div class="col pr-0">
                            <ul class="list-group" id="teamtwo">
                                <li class="list-group-item active">Team Two</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col">
                <ul id="right-members" data-role="listview">
                    <li>Remove Me Please</li>
                </ul>
            </div>
        </div>
    </div>
    <!--<div class="text-center p-4 fixed-bottom" style="background-color: rgba(0, 0, 0, 0.05);">
        Â© 2022 Copyright:
        <a class="text-reset fw-bold" href="https://mdbootstrap.com/">Safira Football Team</a>
    </div>-->
    <script>
        $(function () {
            // Handler for .ready() called.
            //$('#shirt-one, #shirt-two').css({ 'fill': "#FFF" });
            $('#shirt-one').css({ 'fill': "#f83434d9" });
            $('#shirt-two').css({ 'fill': "#666666d9" });
            $("#import-dialog").dialog({
                draggable: false,
                resizable: false,
                modal: true,
                dialogClass: "alert",
                autoOpen: false,
                show: {
                    effect: "blind",
                    duration: 1000
                },
                hide: {
                    effect: "explode",
                    duration: 1000
                },
                classes: {
                    "ui-dialog": "dialog-body",
                    "ui-dialog-titlebar": "dialog-title"
                },
                buttons: {
                    "Import": function () {
                        var players = $("#players").val();
                        players = $.trim(players)
                        if (players.length > 0 && players.indexOf('-') > 0) {
                            $("button.ui-btn-right").click();
                            $('a.ui-editable-btn-del').click();

                            $.each(players.split(/\n/), function (index, item) {
                                var pair = item.split('-');
                                $("ul#left-members li:first input[type=text]").val(pair[0]);
                                $("ul#right-members li:first input[type=text]").val(pair[1]);
                                $("a#item-add").tap();

                            });
                            $("button.ui-btn-right").click();
                            $(this).dialog("close");
                        }
                        else {
                            alert('The data import is invalid!');
                        }
                    },
                    Cancel: function () {
                        $(this).dialog("close");
                    }
                },
                open: function (event, ui) {
                    $("#players").css("height", "90%");

                },
                height: 400,
                maxHeight: 600,
                closeOnEscape: true
            });
        });

        $("#btn-import").on("click", function () {
            $("#import-dialog").dialog("open");
        });

        $('#shirt-one, #shirt-two').spectrum({
            type: "component",
            preferredFormat: "rgb",
            move: function (color) {
                console.log("new color:" + color);
                $(this).css({ 'fill': color });
            }
        });

        $("button#btn-split").click((e) => {
            var leftCount = $('ul#left-members li').not(".ui-editable-temp").length;
            var rightCount = $('ul#right-members li').not(".ui-editable-temp").length;
            var minCount = leftCount > rightCount ? rightCount : leftCount;
            var leftMembers = [];
            var rightMembers = [];
            var randomNumber = 0;
            $('ul#teamone li, ul#teamtwo li').not('.active').remove();

            $('ul#left-members li').not(".ui-editable-temp").each(function (index) {
                //console.log(index + ": " + $(this).text());
                leftMembers.push($(this).text());
            });
            $('ul#right-members li').not(".ui-editable-temp").each(function (index) {
                //console.log(index + ": " + $(this).text());
                rightMembers.push($(this).text());
            });

            // Random Goal keeper
            var goal11 = getRandomInt(0, minCount);
            var goal21 = getRandomInt(0, minCount);
            var goal12 = goal11;
            var goal22 = goal21;
            while (goal11 == goal12) {
                goal12 = getRandomInt(0, minCount);
            }
            while (goal21 == goal22) {
                goal22 = getRandomInt(0, minCount);
            }

            // console.log("goal11:" + goal11);
            // console.log("goal12:" + goal12);
            // console.log("goal21:" + goal21);
            // console.log("goal22:" + goal22);
            // console.log("minCount:" + minCount);

            for (var i = 0; i < minCount; i++) {
                //console.log("Left: " + leftMembers[i] + " Right: " + rightMembers[i]);
                randomNumber = getRandomInt(0, 10);
                if (randomNumber < 5) {
                    if (goal11 == i) {
                        $('ul#teamone').append("<li class='list-group-item goal-keeper'>" + leftMembers[i] + " (Goalkeeper 1)</li>");
                    }
                    else if (goal12 == i) {
                        $('ul#teamone').append("<li class='list-group-item goal-keeper'>" + leftMembers[i] + " (Goalkeeper 2)</li>");
                    }
                    else {
                        $('ul#teamone').append("<li class='list-group-item'>" + leftMembers[i] + "</li>");
                    }

                    if (goal21 == i) {
                        $('ul#teamtwo').append("<li class='list-group-item goal-keeper'>" + rightMembers[i] + " (Goalkeeper 1)</li>");
                    }
                    else if (goal22 == i) {
                        $('ul#teamtwo').append("<li class='list-group-item goal-keeper'>" + rightMembers[i] + " (Goalkeeper 2)</li>");
                    }
                    else {
                        $('ul#teamtwo').append("<li class='list-group-item'>" + rightMembers[i] + "</li>");
                    }
                }
                else {
                    if (goal11 == i) {
                        $('ul#teamone').append("<li class='list-group-item goal-keeper'>" + rightMembers[i] + " (Goalkeeper 1)</li>");
                    }
                    else if (goal12 == i) {
                        $('ul#teamone').append("<li class='list-group-item goal-keeper'>" + rightMembers[i] + " (Goalkeeper 2)</li>");
                    }
                    else {
                        $('ul#teamone').append("<li class='list-group-item'>" + rightMembers[i] + "</li>");
                    }

                    if (goal21 == i) {
                        $('ul#teamtwo').append("<li class='list-group-item goal-keeper'>" + leftMembers[i] + "  (Goalkeeper 1)</li>");
                    }
                    else if (goal22 == i) {
                        $('ul#teamtwo').append("<li class='list-group-item goal-keeper'>" + leftMembers[i] + "  (Goalkeeper 2)</li>");
                    }
                    else {
                        $('ul#teamtwo').append("<li class='list-group-item'>" + leftMembers[i] + "</li>");
                    }
                }
            }
        });

        var $list = $("ul#left-members").listview({
            editable: true,
            //editableType: "simple",
            collapsed: false,
            title: "Left Members",
            emptyTitle: "No Members"
        });

        var $list = $("ul#right-members").listview({
            editable: true,
            //editableType: "simple",
            collapsed: false,
            title: "Right Members",
            emptyTitle: "No Members"
        });

        // Returns a random integer between min (included) and max (excluded)
        function getRandomInt(min, max) {
            return Math.floor(Math.random() * (max - min)) + min;
        }
    </script>
    <div id="import-dialog" title="Import player">
        <textarea id="players" class="form-control" rows="20" placeholder="Players"></textarea>
    </div>
</body>

</html>